#!/bin/sh -e

status r
user c cog cog@apiengine.io orange '{"publicize":"true","name":"The_Big_Cog","url":"http://apiengine.io/spinning/cogs"}'
api c cog Api_Engine false '{"version":{"baseurl":"http://z.apiengine.io/cog/","label":"cog_api","index":"an_index_of_some_flavour"}}'
# automagically creates "version":"1"
resource c cog Api_Engine 1 /status                                                                             Status             '{"tag":"#status,#inspect,#health","description":"status_of_the_system"}'
resource c cog Api_Engine 1 /session                                                                            Session            '{"tag":"#session,#login,#create,#new","description":"create_a_session_for_specified_user"}'
resource c cog Api_Engine 1 /session                                                                            Session            '{"tag":"#session,#login,#inspect","description":"obtain_details_about_the_current_session"}'
resource c cog Api_Engine 1 /session                                                                            Session            '{"tag":"#session,#logout,#delete","description":"trash_the_current_session"}'
resource c cog Api_Engine 1 /user                                                                               User               '{"tag":"#user,#account,#create,#new","description":"create_a_new_user_in_the_system"}'
resource c cog Api_Engine 1 /users                                                                              User               '{"tag":"#user,#users,#list","description":"list_all_users_of_the_system"}'
resource c cog Api_Engine 1 /users/{user}                                                                       Authenticated_User '{"tag":"#user,#inspect","description":"details_of_currently_authenticated_user"}'
resource c cog Api_Engine 1 /users/{user}                                                                       Authenticated_User '{"tag":"#user,#modify","description":"change_profile_details_of_currently_authenticated_user"}'
resource c cog Api_Engine 1 /users/{user}                                                                       Authenticated_User '{"tag":"#user,#delete","description":"delete_currently_authenticated_user"}'
resource c cog Api_Engine 1 /passwordreset                                                                      Credentials        '{"tag":"#password,#reset","description":"request_new_password"}'
resource c cog Api_Engine 1 /passwordreset/{token}                                                              Credentials        '{"tag":"#password,#reset,#token,#get","description":"get_the_new_password_token_expiry"}'
resource c cog Api_Engine 1 /passwordreset/{token}                                                              Credentials        '{"tag":"#password,#reset,#token,#modify","description":"specify_new_password"}'
resource c cog Api_Engine 1 /api                                                                                Api                '{"tag":"#api,#list","description":"list_all_apis"}'
resource c cog Api_Engine 1 /user/{user}/api                                                                    Api                '{"tag":"#api,#create,#new","description":"create_a_brand_spanking_new_api"}'
resource c cog Api_Engine 1 /user/{user}/api                                                                    Api                '{"tag":"#api,#user,#list","description":"view_apis_for_a_user"}'
resource c cog Api_Engine 1 /user/{user}/api/{api}                                                              Api                '{"tag":"#api,#delete","description":"delete_a_users_entire_api"}'
resource c cog Api_Engine 1 /user/{user}/api/{api}                                                              Api                '{"tag":"#api,#create,#version","description":"create_version_of_an_api"}'
resource c cog Api_Engine 1 /user/{user}/api/{api}/{version}                                                    Version            '{"tag":"#api,#view,#inspect,#version","description":"obtain_specific_version_of_an_api"}'
resource c cog Api_Engine 1 /user/{user}/api/{api}/{version}                                                    Version            '{"tag":"#modify,#version","description":"modify_a_version_of_an_api"}'
resource c cog Api_Engine 1 /user/{user}/api/{api}/{version}                                                    Version            '{"tag":"#delete,#version","description":"delete_version_of_an_api"}'
resource c cog Api_Engine 1 /user/{user}/api/{api}/{version}/resource                                           Resource           '{"tag":"#view,#resource,#call,#list","description":"obtain_resources_for_version"}'
resource c cog Api_Engine 1 /user/{user}/api/{api}/{version}/resource                                           Resource           '{"tag":"#create,#resource,#call","description":"create_a_resource"}'
resource c cog Api_Engine 1 /user/{user}/api/{api}/{version}/resource/{resource}                                Resource           '{"tag":"#view,#resource,#inspect,#call","description":"obtain_details_of_specific_resource"}'
resource c cog Api_Engine 1 /user/{user}/api/{api}/{version}/resource/{resource}                                Resource           '{"tag":"#delete,#resource,#call","description":"delete_a_specific_resource"}'
resource c cog Api_Engine 1 /user/{user}/api/{api}/{version}/resource/{resource}                                Resource           '{"tag":"#modify,#resource,#call","description":"change_details_for_a_specific_resource"}'
resource c cog Api_Engine 1 /user/{user}/api/{api}/{version}/resource/{resource}/method                         Method             '{"tag":"#view,#method,#list","description":"get_methods_on_a_resource"}'
resource c cog Api_Engine 1 /user/{user}/api/{api}/{version}/resource/{resource}/method                         Method             '{"tag":"#create,#method","description":"create_a_method_on_a_resource"}'
resource c cog Api_Engine 1 /user/{user}/api/{api}/{version}/resource/{resource}/method/{method}                Method             '{"tag":"#view,#inspect,#method","description":"get_a_method_on_a_resource"}'
resource c cog Api_Engine 1 /user/{user}/api/{api}/{version}/resource/{resource}/method/{method}                Method             '{"tag":"#delete,#method","description":"delete_a_method"}'
resource c cog Api_Engine 1 /user/{user}/api/{api}/{version}/resource/{resource}/method/{method}                Method             '{"tag":"#modify,#method","description":"change_details_for_a_method"}'
resource c cog Api_Engine 1 /user/{user}/notification                                                           Notification       '{"tag":"#user,#notify,#notification","description":"obtain_user_notifications"}'
resource c cog Api_Engine 1 /user/{user}/api/{api}/{version}/notification                                       Notification       '{"tag":"#api,#version,#notify,#notification","description":"obtain_api_notifications"}'
resource c cog Api_Engine 1 /user/{user}/api/{api}/{version}/resource/{resource}/notification                   Notification       '{"tag":"#resource,#notify,#notification","description":"obtain_resource_notifications"}'
resource c cog Api_Engine 1 /user/{user}/api/{api}/{version}/resource/{resource}/method/{method}/notification   Notification       '{"tag":"#method,#notify,#notification","description":"obtain_method_notifications"}'
#

